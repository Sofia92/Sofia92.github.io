

- **Merge Request** 代码检视针对新代码，防止代码库引进不合格代码，导致现有代码质量变差。
- 由项目团队内部执行，每次代码合并稳定分支都要进行检视，以 [前端编码规范清单](../编码规范/index.md) 为检查项，使用 gitlab 的 MR 流程进行代码检视，每个 MR 必须经过项目的 owner 和最少一位成员均同意才能通过(如果项目只有一位成员，则可以自检通过)
- 必须得完成发现问题悉数都修复后，才可进行 merge，可在 git Repo 设置 All discussions must be resolved 来实现约束

## 代码检视的一般原则

- 代码评审是任何开发过程中不可或缺的一部分
- 代码评审是在小段的逻辑完整的代码片段上执行的，例如功能，任务，错误修复，改进等
- 只有通过审核的代码才会发送到测试
- 该项目的所有开发人员都会进行代码评审，无论他们的级别如何
- 项目的所有开发人员都应该通过代码评审，无论他们的级别如何（初级开发人员也应该检视经验丰富的中高级专家的代码）

GitLab 中的 Merge Request 指的是把代码从一个分支合并到另一个分支上做的操作。创建一个 Merge request 会涉及到的主要参数为：

- source branch
- target branch
- title
- description
- assignee
- reviewer

## 使用 Merge Request 时的操作步骤

1.  编写代码并将其推送到 特性分支。
2.  创建将特性分支 推送到 主要开发分支的  Merge Request 。添加适当的描述说明，Assignee 给组内 Owner 和 组内成员 Review ，他们将被通知有一条新的合并请求。
3.  对于收到 Merge Request 任务的人，以 [前端编码规范清单](../编码规范/index.md) 为检查项对 change 的代码进行检视，对于发现违反规范的代码，添加违反规范的细节，提交修复的评论。
4.  对于提交者，关注 Merge 的状态，关注 Comment，参与有关修复的讨论。
5.  修复问题。
6.  将问题修复的更改推送到 特性分支。
7.  如果之前的 MR 被关闭则打开一个新   Merge Request，否则跳过此步骤。
8.  重复执行第 3 步骤

## 应该将 Merge Request 分配给谁

对于合并请求，它们的分配取决于各种因素。根据项目的人数和专业水平，可以有不同的选择。因此，如果您是团队中唯一的开发人员，请为自己分配合并请求。

否则，请与另一位在项目中独立的开发人员交谈，并让他检视彼此的代码。文档检视通常也是必要的，因为在您执行此操作后，您将确保其他开发人员可以在必要时使用您的代码。

如果您是项目的两名开发人员，请相互分配合并请求。如果有三个或更多开发人员，您可以自由选择。

你的团队可以在工作日的开始和结束时或根据要求随时进行代码检视。团队可以决定何时进行代码检视，最重要的是团队成员之间的持续协作。

用 Merge Requests 产生的代码评审如何进行更精细化的流程管理之后可以继续讨论。

## Tips

为使 merge request 更有意义，代码检视应当是迅速的，因此我们建议如下原则：

1.  新功能开发阶段，可以在初步完成一个完整的页面、完整的功能时就提交 merge request。
2.  不要积压很多功能再 Merge Request，会增加 review 复杂度。
3.  如果已有明确的 Redmine 号或者 Gitlab Issue 号，请为 ＃号 提交单独的  merge request。
4.  MR 添加适当的描述说明包含内容，功能点等
5.  对于公共库，可以添加  Merge Request 的模版，从模版创建  Merge Request 。模版创建 [点击这里查看说明](https://www.qikegu.com/uncategorized/925)
